<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Lazy Attribute Loader</title>
</head>
<body>



<img class="lazy1" data-lazy-src="http://placehold.it/300x300" style="width:300px; height:300px" alt="click to load" />


<hr />




<div>
<img class="lazy2" data-lazy-src="http://placehold.it/400x400" style="width:400px; height:400px" alt="lazy loaded image" />
</div>

<button class="lazy2cmd">Lazy Load</button>




<script src="../es5/lazy-attribute.min.js"></script>
<script>


document.addEventListener('DOMContentLoaded', function(){

    // used by both examples
    var map = {'data-lazy-src': 'src'};


    // Example 1 -- self dispatching
    var img1 = document.querySelector('.lazy1'),
        lazySrc = lazyAttribute.map( map );
    
    img1.addEventListener('click', lazySrc);


    // Example 2 -- trigger by a bubbling, custom event
    var img2 = document.querySelector('.lazy2'),
        btn2 = document.querySelector('.lazy2cmd');
    

    lazyAttribute.listen();
    btn2.addEventListener('click', function(){
        img2.dispatchEvent(new CustomEvent('attribute.load.cmd', {bubbles:true, detail:map }));
    });
    

});

</script>


</body>
</html>